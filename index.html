<!DOCTYPE html>
<html lang="ar" dir="rtl" class="scroll-smooth">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>ZynoXx Store</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js" defer></script>
  <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@700;900&display=swap" rel="stylesheet">
  <style>
    body { font-family: 'Cairo', sans-serif; background: #000; color: #fff; }
    .gradient-text { background: linear-gradient(90deg, #ff00c8, #ffd000); -webkit-background-clip: text; color: transparent; }
  </style>
</head>
<body x-data="shop()" x-init="loadProducts(); setInterval(loadProducts, 7000)" class="min-h-screen">

  <!-- اللوغو في الوسط فقط -->
  <div class="fixed top-8 left-0 right-0 z-50 text-center pointer-events-none">
    <h1 class="text-5xl md:text-7xl font-black gradient-text drop-shadow-2xl">ZynoXx</h1>
  </div>

  <!-- المنتجات -->
  <main class="pt-32 pb-24 px-4">
    <div class="grid grid-cols-2 md:grid-cols-3 gap-4 max-w-5xl mx-auto">
      <template x-for="p in products" :key="p.id">
        <div @click="openProduct(p)" class="group cursor-pointer">
          <div class="relative overflow-hidden rounded-2xl aspect-square">
            <img :src="p.image" class="w-full h-full object-cover group-hover:scale-110 transition duration-700">
            <div class="absolute inset-0 bg-gradient-to-t from-black/80 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition"></div>
            <div class="absolute bottom-4 left-4 right-4 opacity-0 group-hover:opacity-100 transition">
              <h3 class="text-2xl font-bold" x-text="p.name"></h3>
              <p class="text-3xl font-black gradient-text" x-text="p.price.toLocaleString() + ' DA'"></p>
            </div>
          </div>
        </div>
      </template>
    </div>
  </main>

  <!-- نافذة المنتج + Checkout -->
  <div x-show="selected" x-transition class="fixed inset-0 z-50 bg-black/95 flex items-center justify-center p-4" @click.self="selected = null">
    <div class="bg-zinc-900 rounded-3xl max-w-md w-full overflow-hidden">
      <img :src="selected.image" class="w-full h-96 object-cover">
      <div class="p-6">
        <h2 class="text-3xl font-bold mb-2" x-text="selected.name"></h2>
        <p class="text-4xl font-black gradient-text mb-8" x-text="selected.price.toLocaleString() + ' DA'"></p>
        
        <form @submit.prevent="sendOrder" class="space-y-5">
          <input x-model="form.name" placeholder="الاسم الكامل" required class="w-full bg-zinc-800 rounded-xl px-5 py-4 text-lg">
          <input x-model="form.phone" placeholder="رقم الهاتف" required class="w-full bg-zinc-800 rounded-xl px-5 py-4 text-lg">
          <select x-model="form.wilaya" required class="w-full bg-zinc-800 rounded-xl px-5 py-4 text-lg">
            <option value="" disabled>اختر الولاية</option>
            <option>الجزائر</option>
            <option>وهران</option>
            <option>قسنطينة</option>
            <!-- أضف باقي الولايات إذا تبي -->
          </select>
          <input x-model="form.address" placeholder="العنوان بالتفصيل" required class="w-full bg-zinc-800 rounded-xl px-5 py-4 text-lg">
          
          <button type="submit" class="w-full bg-gradient-to-r from-pink-600 to-yellow-500 py-5 rounded-xl text-xl font-bold">
            أرسل الطلب عبر تليجرام
          </button>
        </form>
      </div>
    </div>
  </div>

<script>
function shop() {
  return {
    products: [], selected: null,
    form: { name: '', phone: '', wilaya: '', address: '' },

    async loadProducts() {
      try {
        const r = await fetch('products.json?t=' + Date.now());
        this.products = await r.json();
      } catch(e) {}
    },

    openProduct(p) { this.selected = p; },

    async sendOrder() {
      const text = `طلب جديد - ZynoXx Store\n\n` +
        `المنتج: ${this.selected.name}\n` +
        `السعر: ${this.selected.price.toLocaleString()} DA\n\n` +
        `الاسم: ${this.form.name}\n` +
        `الهاتف: ${this.form.phone}\n` +
        `الولاية: ${this.form.wilaya}\n` +
        `العنوان: ${this.form.address}\n\n` +
        `التاريخ: ${new Date().toLocaleString('ar-DZ')}`;

      await fetch(`https://api.telegram.org/bot7682143795:AAFPjswfPRavrXeCvTpF0Lhy749w5Yo7cdk/sendMessage`, {
        method: 'POST',
        headers: {'Content-Type': 'application/json'},
        body: JSON.stringify({ chat_id: 6497254308, text })
      });

      alert("تم إرسال طلبك بنجاح! سنتواصل معك قريبًا");
      this.selected = null;
      this.form = { name: '', phone: '', wilaya: '', address: '' };
    }
  }
}
</script>
</body>
</html>